<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="./assets/images/icon.png" type="image/png">
    <title>IMDB</title>

    <!--
    - custom css link
  -->
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/media_query.css">

    <!--
    - google font link
  -->
    <link href="https://fonts.googleapis.com/css?family=Inter:100,200,300,regular,500,600,700,800,900"
        rel="stylesheet" />
    <script src="/js/script.js"></script>
    <script>
        function updateMovie() {

            const url = '/movies/:' + document.getElementById('movieForm').elements["id"].value;
            console.log(url);
            fetch(url,
                {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    redirect: 'follow',

                    referrerPolicy: 'no-referrer',
                    body: JSON.stringify(
                        {
                            Series_Title: document.getElementById('movieForm').elements["Series_Title"].value,
                            Released_Year: document.getElementById('movieForm').elements["Released_Year"].value,
                            Runtime: document.getElementById('movieForm').elements["Runtime"].value,
                            Genre: document.getElementById('movieForm').elements["Genre"].value,
                            IMDB_Rating: document.getElementById('movieForm').elements["IMDB_Rating"].value,
                            Director: document.getElementById('movieForm').elements["Director"].value,
                            Overview: document.getElementById('movieForm').elements["Overview"].value,
                            Poster_Link: document.getElementById('movieForm').elements["Poster_Link"].value,

                        }
                    )
                })
                        .then(function (response) {
                            alert("item Uptated")
                            window.document.location = "/movies?start=1";

                        })
                    }
        
    </script>

</head>


<body>









    <!--
          - main container
        -->
    <div class="container">

        <!--
            - #HEADER SECTION
          -->

        <header class="">
            <div class="navbar">

                <!--
                - menu button for small screen
              -->
                <button class="navbar-menu-btn">
                    <span class="one"></span>
                    <span class="two"></span>
                    <span class="three"></span>
                </button>


                <a href="#" class="navbar-brand">


                    <img class="logo1" src="/img/logo.png" alt="">

                </a>

                <!--
                - navbar navigation
              -->

                <nav class="">
                    <ul class="navbar-nav">

                        <li> <a href="#" class="navbar-link">Home</a> </li>
                        <li> <a href="#category" class="navbar-link">Category</a> </li>
                        <li> <a href="#live" class="navbar-link  indicator">LIVE</a> </li>

                    </ul>
                </nav>

                <!--
                - search and sign-in
              -->

                <div class="navbar-actions">

                    <form action="#" class="navbar-form">
                        <input type="text" name="search" placeholder="Search..." class="navbar-form-search">

                        <button class="navbar-form-btn">
                            <ion-icon name="search-outline"></ion-icon>
                        </button>

                        <button class="navbar-form-close">
                            <ion-icon name="close-circle-outline"></ion-icon>
                        </button>
                    </form>


                    <!--
                  - search button for small screen
                -->

                    <button class="navbar-search-btn">
                        <ion-icon name="search-outline"></ion-icon>
                    </button>

                    <a href="#" class="navbar-signin">
                        <span>Sign in</span>
                        <ion-icon name="log-in-outline"></ion-icon>
                    </a>

                </div>

            </div>
        </header>
<!-- Movie Edit Form -->

        <div>

            <form class="movie-form-edit" id="movieForm">
                <div class=" input-contain" style="display: none;"><label for="id" type="hidden"> Titre </label>
                    <input type="hidden" id="id" name="id" value="<%= _id %>">
                </div>

                <div class=" input-contain"><label for="name"> Titre </label>
                    <input type="text" id="name" name="Series_Title" value="<%= Series_Title %>">
                </div>

                <div class=" input-contain"><label for="R-year">Released year</label>
                    <input type="text" id="Released_Year" name="Released_Year" value="<%=Released_Year %>">
                </div>
                <div class=" input-contain"><label for="R-year">Runtime</label>
                    <input type="text" id="Runtime" name="Runtime" value="<%= Runtime %>">
                </div>
                <div class=" input-contain"><label for="genre">Genre</label>
                    <input type="text" id="genre" name="Genre" value="<%=Genre %>">
                </div>
                <div class=" input-contain"><label for="rating">Rating</label>
                    <input type="text" id="rating" name="IMDB_Rating" value="<%= IMDB_Rating %>">
                </div>
                <div class=" input-contain"><label for="director">Director</label>
                    <input type="text" id="director" name="Director" value="<%= Director %>">
                </div>
                <div class=" input-contain"><label for="subject">Overview</label>
                    <textarea id="subject" name="Overview" style="height:200px"><%= Overview %></textarea>
                </div>
                <div class=" input-contain"><label for="image">Image-link</label>
                    <input type="text" id="image" name="Poster_Link" value="<%= Poster_Link %>">
                </div>
                <div class="button-del-modif">
                    <button class="delete " type="button" onclick="updateMovie()" id="edit">Update </button>
                </div>
                <!-- <input class="button-del-modif" type="submit" value="Add movie"> -->
            </form>


        </div>









    </div>





    <!--
            - custom js link
          -->
    <script src="/js/main.js"></script>

    <!--
            - ionicon link
          -->
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
</body>